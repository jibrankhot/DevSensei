<!-- Chat Container -->
<div #chatContainer class="chat-wrapper" [class.scrollable]="chatHistory.length > 4">

  <!-- Progress Bar -->
  <div class="progress-bar">
    <div class="progress" [style.width]="progressPercent + '%'"></div>
  </div>

  <!-- Chat Messages -->
  <div *ngFor="let msg of chatHistory" class="chat-message" [ngClass]="msg.type">
    <div *ngIf="msg.type === 'mentor'" class="mentor-block">
      <div class="role">ðŸ’¬ Angular Mentor</div>
      <p class="text">{{ msg.text }}</p>

      <button *ngIf="msg.nextHint && !isTyping" class="hint-btn" (click)="revealNext(msg.nextHint)"
        [disabled]="disableNext">
        ðŸ‘‰ {{ msg.nextHint }}
      </button>
    </div>

    <div *ngIf="msg.type === 'user'" class="user-block">
      <div class="role">ðŸ§  Jibran</div>
      <p class="text">{{ msg.text }}</p>
    </div>
  </div>

  <!-- Typing Indicator -->
  <div *ngIf="isTyping" class="typing-indicator">
    <span class="dot"></span>
    <span class="dot"></span>
    <span class="dot"></span>
    <span class="typing-label">Angular Mentor is typing...</span>
  </div>

  <!-- Chat Completion Summary -->
  <div *ngIf="isChatComplete" class="summary-block">
    <h4>ðŸŽ¯ Great Work Jibran!</h4>
    <p>Youâ€™ve completed this topic. Hereâ€™s your quick recap:</p>
    <ul>
      <li *ngFor="let item of recapPoints">âœ… {{ item }}</li>
    </ul>
  </div>

</div>